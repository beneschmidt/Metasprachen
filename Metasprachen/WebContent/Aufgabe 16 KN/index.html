<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<title>Beispiel</title>
<meta charset='utf-8' />

<link rel="stylesheet" href="css/default.css" />
<script src="lib/helper.js"></script>

<script>
    ﻿window.onload = showXML;

    function loadXML("C://) {
        var status = document.getElementById("status");

        var xhttp = new XMLHttpRequest();

        try {
            xhttp.open("GET", filename, false);
            xhttp.send();
        }
        catch (e) {
            status.innerHTML = e + "Achtung: Die HTML-Seite muss durch einen Server ausgeliefert werden."
            return null;
        }

        var type = xhttp.getResponseHeader("Content-Type");

        if (type.indexOf("xml") == -1) {
            return null;
        }


        if (xhttp.status != 200) {
            status.innerHTML = xhttp.responseText;
            return null;
        }
        else {
            var now = new Date();
            status.innerHTML = now.toLocaleString() + " " + filename + " erfolgreich gelesen."
            return xhttp.responseXML;
        }
    }

    function showXML() {

        xmlDoc = loadXML("buchkatalog.xml");

        if (xmlDoc == null) {
            return;
        }

        // Serialisiere das XML-Dokument zu einem String
        var s = new XMLSerializer();
        xml = s.serializeToString(xmlDoc);
        document.getElementById("out").textContent = xml;


        // Erstelle im HTML-Dokument eine ungeordnete Liste der Titel der Bücher
        books = xmlDoc.getElementsByTagName("buch");

        var list = '';

        for (i = 0; i < books.length; i++) {
            title = (books[i].getElementsByTagName("titel")[0].childNodes[0].nodeValue);
            list += '<li>' + title + '</li>';
        }
        list = '<ul>' + list + '</ul>';
        document.getElementById("content").innerHTML = list;

        // Gib rekursiv Informationen zu den Knoten des XML-DOM-Baumes aus
        followNode(xmlDoc, 0);


    }

    function followNode(node) {
        showNodeInfo(node);
        if (node.childNodes.length > 0) {
            followNode(node.firstChild);
        }
        if (node.nextSibling) {
            followNode(node.nextSibling);
        }
    }

    function showNodeInfo(node) {
        var info = "";

        info += " nodeName: " + node.nodeName;
        info += " nodeType: " + node.nodeType;
        info += " nodeValue: [" + node.nodeValue + "]";
        if (node.nodeType == node.ELEMENT_NODE) {
            for (i = 0; i < node.attributes.length; i++) {
                attr = node.attributes[i];
                info += " attributeName: " + attr.name;
                info += " attributeValue: " + attr.value;
            }
        }
        document.getElementById("nodeinfo").innerHTML += info + "\n";
    }

    </script>
</head>

<body>

</body>
</html>