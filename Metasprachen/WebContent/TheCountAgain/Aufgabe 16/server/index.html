<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Aufgabe 16</title>
<script type="text/javascript">

	window.onload = start;

	function start() {
		var xml = loadXML("hochschule.xml");
		
		var body = document.getElementsByTagName("BODY")[0];
		var br = document.createElement("br");
		var titleStudentenliste = document.createTextNode("Studentenliste");
		
		body.appendChild(br).appendChild(titleStudentenliste);
		
		if(xml==null){
			body.appendChild(document.createTextNode("leider XML nicht gefunden"));
		}
		
		var allStudenten = xml.getElementsByTagName("student");
		
		// Array für Studenten anlegen
		var studentenListe =[];
		var i;
		for(i=0; i < allStudenten.length; i++){
			var currentStudent = allStudenten[i];
			var matrikelNr = currentStudent.getAttribute("matrikelnr");
			var vorname = currentStudent.getElementsByTagName("vorname")[0].childNodes[0].nodeValue;
			var nachname = currentStudent.getElementsByTagName("nachname")[0].childNodes[0].nodeValue;
			
			var htmlStudent = new student(vorname, nachname, matrikelNr, 0, 0, 0);
			studentenListe.push(htmlStudent);
		}
		
		var unsortedList = document.createElement("ul");
		var j;
		for(j=0; j<studentenListe.length; j++){
			var li = document.createElement("li");
			
			var toString = studentenListe[j].firstname;
			li.appendChild(toString);
			unsortedList.appendChild(nextListItem);
		}
		
		body.appendChild(unsortedList);
	}
	
	function loadXML(filename) {
		var status = document.getElementById("status");
		var xhttp = new XMLHttpRequest();
		try {
			xhttp.open("GET", filename, false);
			xhttp.send();
		} catch (e) {
			status.innerHTML = e + "Achtung: Die HTML-Seite muss durch einen Server ausgeliefert werden."
			return null;
		}
		var type = xhttp.getResponseHeader("Content-Type");
		if (type.indexOf("xml") == -1) {
			return null;
		}
		if (xhttp.status != 200) {
			return null;
		} else {
			return xhttp.responseXML;
		}
	}
	
	function student(firstname, lastname, matrikelNr, anzahlPruefungen, summeSemesterWochenStunden, notenschnitt, gewichteterSchnitt) {
		this.firstname = firstname;
		this.lastname = lastname;
		this.matrikelNr = matrikelNr;
		this.anzahlPruefungen = anzahlPruefungen;
		this.summeSemesterWochenStunden = summeSemesterWochenStunden;
		this.notenschnitt = notenschnitt;
		this.gewichteterSchnitt = gewichteterSchnitt;
	}
	
</script>
</head>
<body>
</body>
</html>